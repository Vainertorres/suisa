{% extends 'base/basebdua.html' %}
{% load static %}

 {% block head_list %}   
   
 {% endblock head_list%} 

{% block page_content %}
	  <div class="card shadow mb-4">
                <!-- Card Header - Dropdown -->
                <div class="card-header py-3 d-flex flex-row align-items-center justify-content-between">
                  <h6 class="m-0 font-weight-bold text-primary">Seguimiento a usuarios Maestro Subsidiado</h6>                  
                </div>
                <!-- Card Body -->
                <div class="card-body">
                  
                  <table id="tbl" class="table table-hover"
                  data-pagination="true"                    
                    data-show-columns="true"
                    data-toolbar=".buttons-toolbar"
                    data-locale="es-MX"
                    data-show-toggle="true"
                    data-show-fullscreen="true">
                    <thead>   
                      <th scope="col">Item</th>                                  
                      <th scope="col">Identificaci√≥n</th>
                      <th scope="col">Nombres y Apellidos</th>
                      <th scope="col">Fecha Nac</th>                          
                      <th scope="col">Aseguradora</th>                       
                      <th scope="col">Fecha afil</th> 
                      <th scope="col">Estado</th> 
                      <th scope="col"></th> 
                      

                    </thead>  
                    <tbody>
                      
                     
                    </tbody>                      
                  </table>
                </div>
            </div>

            
{% endblock page_content %}

{% block js_page %}
<script>
  var $tbl
  $(document).ready(function () {

    $tbl = $('#tbl').DataTable({
        ajax:{
          url:"{% url 'aseg:listss_reload' %}",
          dataSrc: 'datos'
        },
        columns: [
          { data: "id"},
          { data: "identificacion"},
          { data: "razonsocial"},
          { data: "fechanac"},
          { data: "eps__descripcion"},
          { data: "fechaafiliacion"},
          { data: "estadoafil"},
          { data: null,
            className: "dt-center editor-edit text-success",
            defaultContent: '<i class="fa-solid fa-pen-to-square"></i>',
            orderable: false
          }
          ],
        select: true,
        dom: 'Bfrtip',
        processing: true,
        serverSide: true,
        pageLength:10,
        buttons:[
          {
            text: '<i class="fa-solid fa-pen-to-square"></i>', className: "text-success",
            action: function(e, dt, node, config){
              alert("Hola");
              var  row = dt.rows({selected:true}).data()
              if (row.pageLength == 1){

              }
              else
                mensaje("Debe seleccionar una fila")
            }
            
          }
          ],        
  initComplete: function(settings, json) {

    //alert('Tabla cargada');

    }
    
    });
});
</script>
{% endblock %}
